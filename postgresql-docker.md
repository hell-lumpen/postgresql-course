### Подробная инструкция по Docker для начинающих

#### Что такое Docker?

**Docker** — это инструмент, который позволяет разработчикам легко создавать, развертывать и запускать приложения в изолированных средах, называемых **контейнерами**. Контейнеры работают как легковесные виртуальные машины, но они используют ядро операционной системы хоста, что делает их более эффективными по сравнению с традиционными виртуальными машинами.

**Преимущества Docker:**
- **Изоляция приложений:** Каждое приложение работает в своем контейнере, что предотвращает конфликты между разными приложениями и их зависимостями.
- **Портативность:** Контейнеры могут работать на любом сервере, который поддерживает Docker, что упрощает развертывание приложений на разных платформах.
- **Легкость:** Контейнеры запускаются быстрее и требуют меньше ресурсов по сравнению с виртуальными машинами.

#### Основные термины Docker

1. **Контейнер:** Изолированная среда, где запускается приложение. Контейнеры создаются из образов и могут работать независимо друг от друга.

2. **Образ (Image):** Шаблон для создания контейнеров. Образ включает все необходимые файлы и настройки для приложения. Образы можно загружать из репозиториев (например, Docker Hub) или создавать самостоятельно.

3. **Dockerfile:** Текстовый файл, который содержит набор инструкций для создания образа. Этот файл описывает, как установить зависимости, скопировать файлы и настроить приложение.

4. **Docker Hub:** Облачный сервис для хранения и обмена образами. Вы можете загружать свои образы и загружать образы других разработчиков.

5. **Volume:** Специальный механизм для хранения данных вне контейнера. Это позволяет сохранять данные даже после удаления контейнера. 

6. **Docker Compose:** Инструмент для определения и запуска многоконтейнерных приложений с помощью файла конфигурации в формате YAML.

#### Установка Docker

1. **Скачайте и установите Docker:**
   - Для **Windows** и **macOS** используйте [Docker Desktop](https://www.docker.com/products/docker-desktop).
   - Для **Linux**: следуйте инструкциям для вашего дистрибутива на [официальном сайте Docker](https://docs.docker.com/get-docker/).

2. **Проверьте установку:**
   После установки откройте терминал (или командную строку) и введите:
   ```bash
   docker --version
   ```
   Вы должны увидеть версию Docker. Это значит, что установка прошла успешно.

#### Основные команды Docker

Теперь давайте рассмотрим основные команды Docker, которые вам понадобятся.

- **Список контейнеров:**
  Чтобы увидеть запущенные контейнеры, выполните:
  ```bash
  docker ps
  ```
  Если хотите увидеть все контейнеры, включая остановленные:
  ```bash
  docker ps -a
  ```

- **Запуск контейнера:**
  Чтобы создать и запустить контейнер, используйте:
  ```bash
  docker run [OPTIONS] IMAGE
  ```

- **Остановка контейнера:**
  Для остановки работающего контейнера:
  ```bash
  docker stop CONTAINER_ID
  ```

- **Удаление контейнера:**
  Чтобы удалить контейнер:
  ```bash
  docker rm CONTAINER_ID
  ```

- **Сборка образа из Dockerfile:**
  Для создания образа используйте:
  ```bash
  docker build -t IMAGE_NAME .
  ```
  Здесь `-t IMAGE_NAME` задает имя образа, а `.` указывает на текущую директорию, где находится Dockerfile.

- **Загрузка образа на Docker Hub:**
  Для загрузки вашего образа:
  ```bash
  docker push IMAGE_NAME
  ```

- **Загрузка образа с Docker Hub:**
  Чтобы загрузить образ, выполните:
  ```bash
  docker pull IMAGE_NAME
  ```

#### Создание контейнера с PostgreSQL

Теперь мы создадим контейнер с PostgreSQL — популярной системой управления базами данных.

##### Шаг 1: Запуск контейнера с PostgreSQL

1. **Откройте терминал.**

2. **Выполните команду для создания контейнера:**
   ```bash
   docker run --name my-postgres -e POSTGRES_USER=myuser -e POSTGRES_PASSWORD=mypassword -d -p 5432:5432 postgres
   ```
   **Что делает эта команда?**
   - `docker run` — команда для создания и запуска контейнера.
   - `--name my-postgres` — задает имя вашему контейнеру. Это поможет вам легко его идентифицировать.
   - `-e POSTGRES_USER=myuser` — задает имя пользователя для PostgreSQL. Вместо `myuser` вы можете указать любое имя.
   - `-e POSTGRES_PASSWORD=mypassword` — задает пароль для указанного пользователя. Замените `mypassword` на свой надежный пароль.
   - `-d` — запускает контейнер в фоновом режиме, чтобы вы могли продолжать использовать терминал.
   - `-p 5432:5432` — пробрасывает порт 5432. Это позволяет вам подключаться к PostgreSQL извне. Первый 5432 — это порт на вашем компьютере, второй — порт внутри контейнера.
   - `postgres` — имя образа, который будет загружен с Docker Hub.

3. **Проверьте, что контейнер запущен:**
   Введите команду:
   ```bash
   docker ps
   ```
   Вы должны увидеть свой контейнер в списке работающих контейнеров.

##### Шаг 2: Подключение к PostgreSQL

1. **Установите клиент PostgreSQL:**
   - Если у вас его еще нет, скачайте и установите PostgreSQL клиент. Вы можете использовать pgAdmin (графический интерфейс) или командную строку psql.

2. **Подключитесь к PostgreSQL:**
   Введите следующую команду в терминале (или используйте pgAdmin для подключения):
   ```bash
   psql -h localhost -U myuser -d postgres
   ```
   **Параметры:**
   - `-h localhost` — адрес сервера (localhost указывает на то, что вы подключаетесь к локальному серверу).
   - `-U myuser` — имя пользователя, которое вы указали при создании контейнера.
   - `-d postgres` — имя базы данных, к которой вы хотите подключиться (по умолчанию это `postgres`).

3. **Введите пароль:**
   Когда вас попросят ввести пароль, введите `mypassword` (или тот, который вы указали).

##### Шаг 3: Проверка работы PostgreSQL

После успешного подключения вы можете выполнять SQL-запросы. Например, создайте таблицу:
```sql
CREATE TABLE test_table (
    id SERIAL PRIMARY KEY,
    name VARCHAR(100)
);
```
Если команда выполнится без ошибок, это значит, что PostgreSQL работает корректно.

#### Шаг 4: Остановка и удаление контейнера

1. **Остановка контейнера:**
   Чтобы остановить контейнер, выполните:
   ```bash
   docker stop my-postgres
   ```

2. **Удаление контейнера:**
   Чтобы удалить контейнер, выполните:
   ```bash
   docker rm my-postgres
   ```
